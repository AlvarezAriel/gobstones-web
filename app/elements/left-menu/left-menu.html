<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/iron-icons/iron-icons.html">

<dom-module id="left-menu">
  <template>

    <style>
      .title {
        text-align: center;
      }

      .actions {
        margin-left: 5px;
      }

      .action {
        margin-bottom: 10px;
      }

      .action-text {
        vertical-align: middle;
      }
    </style>

    <h1 class="title">Acciones</h1>

    <div class="actions">
      <div class="clickable action">
        <paper-button on-click="saveProgram">
          <iron-icon icon="icons:save"></iron-icon> <span class="action-text">Guardar</span>
        </paper-button>
      </div>

      <div class="clickable action">
        <paper-button on-click="loadProgram">
          <iron-icon icon="icons:folder-open"></iron-icon> <span class="action-text">Abrir</span>
        </paper-button>
      </div>
    </div>
  </template>

  <script>

    Polymer({
      is: 'left-menu',

      saveProgram: function() {
        const editor = this._getEditor().editor;
        const code = editor.getValue()
        this._saveFile(code, "program.gbs");
      },

      loadProgram: function() {
        alert("// TODO");
      },

      _saveFile: function(content, name) {
        const a = document.createElement("a");
        const file = new Blob([content], { type: "text/plain" });
        a.href = URL.createObjectURL(file);
        a.download = name;
        a.click();
      },

      _getEditor: function() {
        return document.querySelector("#editor");
      }
    });

  </script>
</dom-module>
